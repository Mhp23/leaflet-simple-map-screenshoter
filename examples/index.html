
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>leaflet-simple-map-screenshoter examples</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.1/dist/leaflet.css"
          integrity="sha512-Rksm5RenBEKSKFjgI3a41vrjkw4EVPlJ3+OiI65vTjIdo9brlAacEuKOiQ5OFh7cOI1bkDwLqdLw3Zg0cRJAAQ=="
          crossorigin=""/>
    <script src="https://unpkg.com/leaflet@1.3.1/dist/leaflet.js"
            integrity="sha512-/Nsx9X4HebavoBvEBuyp3I7od5tA0UzAxs+j83KgC8PU0kgB4XiK4Lfe4y4cgBtaRJQEIFCW+oC506aPT2L1zw=="
            crossorigin=""></script>
    <script src="../dist/leaflet-simple-map-screenshoter.js"></script>
    <style>
        html {
            height: 100%;
            width: 100%;
        }

        #mapSimple {
            display: block;
            margin: 50px;
            height: 300px;
            min-width: 300px;
        }

        #map {
            display: block;
            margin: 50px 50px 10px 50px;
            height: 300px;
            min-width: 300px;
        }
    </style>
</head>

<body>
<div id="mapSimple"></div>
<div id="map"></div>
<button id="screenMap">Take and download screen</button>
<button id="screenMapAndPast">Take screen and past to body</button>
<script>

    var mapSimple = L.map('mapSimple').setView([40, -74], 6);
    L.tileLayer('http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(mapSimple);

    L.simpleMapScreenshoter({
        screenName: function () {
            return new Date().toDateString()
        }
    }).addTo(mapSimple)


    var map = L.map('map').setView([56, 37], 6);
    L.tileLayer('http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(map);
    var simpleMapScreenshoter = L.simpleMapScreenshoter({
        hidden: true
    }).addTo(map)

    document.getElementById('screenMap').addEventListener('click', function () {
        simpleMapScreenshoter.takeScreen('blob', {
            caption: function () {
                return 'Hello world'
            }
        }).then(blob => {
            var a = document.createElement('a')
            var url = window.URL.createObjectURL(blob)
            document.body.appendChild(a)
            a.href = url
            a.download = 'screen.png'
            a.click()
            window.URL.revokeObjectURL(url)
        }).catch(e => {
          alert(e.toString())
        })
    })

    document.getElementById('screenMapAndPast').addEventListener('click', function () {
        simpleMapScreenshoter.takeScreen('image', {
            caption: function () {
                return 'Hello world'
            }
        }).then(image => {
            var img = document.createElement('img')
            img.src = image
            document.body.appendChild(img)
        }).catch(e => {
            alert(e.toString())
        })
    })
</script>
</body>

</html>